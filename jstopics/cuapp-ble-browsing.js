hmLoadTopic({
hmKeywords:"BLE Beacons,Browsing",
hmTitle:"Browsing",
hmDescription:"The Xibu App continuously builds up connections to discovered HsM BLE-networked devices to read all resource instance values provided by these devices. This process is called...",
hmPrevLink:"cuapp-ble-advertising.html",
hmNextLink:"mobile-gateway.html",
hmParentLink:"cuapp-ble-communication.html",
hmBreadCrumbs:"<a href=\"frontends.html\">Frontends<\/a> &gt; <a href=\"cuapp.html\">Xibu App<\/a> &gt; <a href=\"cuapp-ble-communication.html\">BLE communication<\/a>",
hmTitlePath:"Frontends > Xibu App > BLE communication > Browsing",
hmHeader:"<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Browsing<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">The Xibu App continuously builds up connections to <a href=\"cuapp-ble-advertising.html\" class=\"topiclink\">discovered<\/a> HsM BLE-networked devices to read all resource instance values provided by these devices. This process is called <span style=\"font-style: italic;\">browsing.<\/span> The data gathered during browsing is used display the latest status of the devices within the app and is <a href=\"mobile-gateway.html\" class=\"topiclink\">relayed<\/a> to the HsM Backend.<\/p>\n\r<p class=\"p_Normal\">The browsing behavior of the app is different depending on whether the app is in foreground.<\/p>\n\r<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Foreground browsing<\/span><\/h1>\n\r<p class=\"p_Normal\">If the Xibu App is in foreground (i.e. is the app currently shown on the mobile device and the mobile device is not locked) and the app is on the device status screen it continuously browses HsM BLE-networked device. <\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>The app will discover devices nearby once every minute for 5 seconds. I.e. every minute the device listens to BLE advertising packets of devices nearby for 5 seconds. The devices discovered in these 5 seconds are the candidates for the following steps.<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Devices for which data has been gathered within the last 15 minutes will be removed from the candidates list.<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>The candidates list is sorted by the time data of these devices has been last gathered - i.e. devices for which no data has been retrieved for a long time are on top of the list. <\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>The app builds up a BLE connection to the devices on the list one by one and gathers all resource instance values of the device. This step takes usually between 1 and 5 seconds depending on the BLE connection quality.<\/p><p class=\"p_Normal\">Note: The information gathered from <a href=\"cuapp-ble-advertising.html\" class=\"topiclink\">advertising<\/a> packets is processed more often therefore the resource instance values sent with advertising packets are updated in shorter intervals than those only gathered when connecting to the devices.<\/p>\n\r<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Background browsing with BLE Beacons.<\/span><\/h1>\n\r<p class=\"p_Normal\">Even if the Xibu App is in background (is not the currently active app on the mobile device, or the device is locked) it still browses devices by utilizing <a href=\"hsmd-ble-ceacons.html\" class=\"topiclink\">BLE Beacon packages<\/a> broadcast by HsM BLE-networked devices. <\/p>\n\r<p class=\"p_Normal\">Mobile devices can detect when they enter or exit a particular setting by monitoring BLE beacons. BLE beacons are specially structured BLE packets sent by BLE devices. The operating systems of these mobile devices have an internal logic that decides whether it enters the area of the beacon source (the device sending the beacon packet) or leaves the area of the beacon source. Both events can then trigger actions on the mobile device. The Xibu App registers with the operating system of the mobile device it runs on so that it is woken up whenever the operating system enters the area of BLE-networked device that send beacons with specific beacon ids. <\/p>\n\r<p class=\"p_Normal\">Once woken up by the operating system the Xibu App will browse devices. <\/p>\n\r<p class=\"p_Normal\">The beacon wake up frequency i.e. how often the operating system wakes up the app when it receives BLE beacon messages is defined through the operating and is depending on various factors like OS version, battery level and user app interaction. <\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r"
})
