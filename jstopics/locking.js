hmLoadTopic({
hmKeywords:"",
hmTitle:"Locking",
hmDescription:"For some operations on customer data in HSM the customer needs to be locked, so that no data inconsistencies can occur. This is mostly caused by the fact that HSM allows...",
hmPrevLink:"global-roles.html",
hmNextLink:"technical-check.html",
hmParentLink:"clse.html",
hmBreadCrumbs:"<a href=\"backend-infrastructure.html\">Backend infrastructure<\/a> &gt; <a href=\"clse.html\">Client Service<\/a>",
hmTitlePath:"Backend infrastructure > Client Service > Locking",
hmHeader:"<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Locking<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">For some operations on customer data in HSM the customer needs to be locked, so that no data inconsistencies can occur. This is mostly caused by the fact that HSM allows clients to work offline.<\/p>\n\r<p class=\"p_Normal\"><a id=\"user-content-what-data-is-protected-by-the-lock\" class=\"hmanchor\"><\/a><\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>All data of a customer which is connected to the location tree. This includes devices, orders and stocktaking, and the location tree itself.<\/p><p class=\"p_Normal\"><a id=\"user-content-how-is-locking-performed\" class=\"hmanchor\"><\/a><\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>When a customer gets locked, it is locked for this user on this device and this app, i.e. while this lock is active only that user on that device and that app can modify the protected data.<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>When a user locks a customer in the Service-App, the lock also affects the XIBU-App, which means locked data cannot be accessed even by the same user.<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>The user who requested a lock can unlock the customer at any time.<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>A lock can also be applied to a user only, instead of a user and an app; i.e. if an app sends its app-id with the lock request to the back-end, the lock will affect the user and the app. Otherwise the lock would only affect the user. Note: Currently the app always sends its app-id when doing a lock request.<\/p><p class=\"p_Normal\"><a id=\"user-content-querying-the-lock-status-of-a-customer\" class=\"hmanchor\"><\/a><\/p>\n\r<p class=\"p_Normal\">The state of a customer-lock can be queried, result of this query will be:<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Locked: yes | no<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Unlockable: true if lock is older than 24 hours (Note: the 24 hours are variable and can be changed).<\/p><p class=\"p_Normal\">If a user has one of the following permissions, the result will also contain information about the user who currently holds the lock.<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Admin<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Global admin<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>..@Bruno<\/p><p class=\"p_Normal\"><a id=\"user-content-locking-logic\" class=\"hmanchor\"><\/a><\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>When a user requests a customer lock, the lock will be granted if that customer is either not locked or if the customer is locked by the same user with the same app id (refresh of lock), or locked by a different user but the lock was initiated more than 24h ago (and therefore the system assumes that this is a stale lock).<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>When a user accesses a customer in a locked state in a read only way, it will work as normal.<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>If a client, that assumes that a customer is locked, performs an operation that relies on the lock, but the lock was removed in the meantime and locked by someone else, an error will occur. If this happens the client will inform the user (shall happen rarely).<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Customers can be unlocked and then locked by another user with a lock operation after 24 hours.<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>XIBU-App: If customer is locked, an error will be displayed (&quot;Customer is locked&quot;), even of the user accesses the locked customer after 24 hours. (Note: XIBU-App currently does not implement the unlocking logic.)<\/p><p class=\"p_Normal\"><a id=\"user-content-forceful-unlocking\" class=\"hmanchor\"><\/a><\/p>\n\r<p class=\"p_Normal\">Customers can be unlocked forcefully via the web interface by users with a special role (Organization-Admin &amp; Super-Admin).<\/p>\n\r"
})
