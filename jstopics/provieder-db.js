hmLoadTopic({
hmKeywords:"",
hmTitle:"Provider DB",
hmDescription:"The provider DB is the place where the first digital representation of HsM devices is stored. The End-Test procedure writes data records to tables in this database; from this...",
hmPrevLink:"logging2.html",
hmNextLink:"trace_product.html",
hmParentLink:"on-premise-infrastructure.html",
hmBreadCrumbs:"<a href=\"on-premise-infrastructure.html\">On Premise infrastructure<\/a>",
hmTitlePath:"On Premise infrastructure > Provider DB",
hmHeader:"<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Provider DB<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">The provider DB is the place where the first digital representation of HsM devices is stored. The End-Test procedure writes data records to tables in this database; from this records HsM starts the life cycle for digital twins.<\/p>\n\r<p class=\"p_Normal\">The Provider DB stores much more information than necessary for HsM. HsM only interacts with data in following table:<\/p>\n\r<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0.3750rem 0;\"><table style=\"width:43.7500rem; border:none; border-spacing:0; border-collapse:collapse;\">\n\r<thead>\n\r<tr>\n\r<th style=\"vertical-align:top; width:9.2500rem; background-color:#DCDCDC; padding:0.1250rem; border:solid thin #c0c0c0;\"><p class=\"p_Normal\">Table Name<\/p>\n\r<\/th>\n\r<th style=\"vertical-align:top; width:35.5625rem; background-color:#DCDCDC; padding:0.1250rem; border:solid thin #c0c0c0;\"><p class=\"p_Normal\">Description<\/p>\n\r<\/th>\n\r<\/tr>\n\r<\/thead>\n\r<tbody>\n\r<tr>\n\r<td style=\"vertical-align:top; width:9.2500rem; padding:0.1250rem; border:solid thin #c0c0c0;\"><p class=\"p_Normal\">TRACE_Product<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; width:35.5625rem; padding:0.1250rem; border:solid thin #c0c0c0;\"><p class=\"p_Normal\">This is the main table for products i.e. things that run of the production line including dispensers, gateways and other device.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; width:9.2500rem; padding:0.1250rem; border:solid thin #c0c0c0;\"><p class=\"p_Normal\">TRACE_Measure<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; width:35.5625rem; padding:0.1250rem; border:solid thin #c0c0c0;\"><p class=\"p_Normal\">A Key value storage used to store measurements done by the end-test procedure, actions performed by the end-test procedure and values set by the end-test procedure.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; width:9.2500rem; padding:0.1250rem; border:solid thin #c0c0c0;\"><br \/>\n\r<\/td>\n\r<td style=\"vertical-align:top; width:35.5625rem; padding:0.1250rem; border:solid thin #c0c0c0;\"><br \/>\n\r<\/td>\n\r<\/tr>\n\r<\/tbody>\n\r<\/table>\n\r<\/div>\n\r<p class=\"p_Normal\">When inserting a record with <span class=\"f_InlineCode\">ProductRecordStateId = 0<\/span> the <span class=\"f_InlineCode\">TRG_TRACE_Product_InsteadOfInsert<\/span> trigger will intercept the insert and will apply following logic:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">If there is already a record with the same BLUUID and ProductRecordState 0 <\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>this record will be set to productRecordState 2 (re-tested)<\/p><p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>The DeviceId of this record will be used for the record to be inserted (overriding any user-provided deviceid)<\/p><p class=\"p_Normal\">Else<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>The insert is done without any additional logic<\/p><p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p style=\"margin: 0 0 0 0;\"><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">CREATE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">UNIQUE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">INDEX<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> IX_UniqueBluuid <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">on<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> Trace_Product<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">(<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\">Bluuid<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">,<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> ProductRecordStateId<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">)<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">WHERE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> ProductRecordStateId <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">=<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> 0 <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">AND<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> Bluuid <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">IS<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">NOT<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">NULL<\/span><\/p>\n\r<p style=\"margin: 0 0 0 0;\"><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">CREATE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">UNIQUE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">INDEX<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> IX_UniqueDeviceId <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">on<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> Trace_Product<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">(<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\">DeviceId<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">,<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> ProductRecordStateId<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">)<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">WHERE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> ProductRecordStateId <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">=<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> 0<\/span><\/p>\n\r<p style=\"margin: 0 0 0 0;\"><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">CREATE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">UNIQUE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">INDEX<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> IX_UniqueSerialNo <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">on<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> Trace_Product<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">(<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\">SerialNo<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">,<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> ProductRecordStateId<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">)<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #0000ff;\">WHERE<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\"> ProductRecordStateId <\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">IN(<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\">0<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">,<\/span><span style=\"font-size: 0.90rem; font-family: Consolas;\">2<\/span><span style=\"font-size: 0.90rem; font-family: Consolas; color: #808080;\">)<\/span><\/p>\n\r"
})
